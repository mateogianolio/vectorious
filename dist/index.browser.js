var v=(()=>{var O=Object.defineProperty,go=Object.prototype.hasOwnProperty;var z=(r,e)=>()=>(e||(e={exports:{}},r(e.exports,e)),e.exports),qe=r=>O(r,"__esModule",{value:!0}),wo=(r,e)=>{qe(r);for(var t in e)O(r,t,{get:e[t],enumerable:!0})},vo=(r,e)=>{if(qe(r),typeof e=="object"||typeof e=="function")for(let t in e)!go.call(r,t)&&t!=="default"&&O(r,t,{get:()=>e[t],enumerable:!0});return r},Io=r=>r&&r.__esModule?r:vo(O({},"default",{value:r,enumerable:!0}),r);var po=z((jm,co)=>{co.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var uo=z((Om,de)=>{typeof Object.create=="function"?de.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:de.exports=function(e,t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}});var ho=z(h=>{var ea=/%[sdj%]/g;h.format=function(r){if(!F(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(v(arguments[t]));return e.join(" ")}for(var t=1,o=arguments,n=o.length,a=String(r).replace(ea,function(c){if(c==="%%")return"%";if(t>=n)return c;switch(c){case"%s":return String(o[t++]);case"%d":return Number(o[t++]);case"%j":try{return JSON.stringify(o[t++])}catch(m){return"[Circular]"}default:return c}}),s=o[t];t<n;s=o[++t])P(s)||!T(s)?a+=" "+s:a+=" "+v(s);return a};h.deprecate=function(r,e){if(g(global.process))return function(){return h.deprecate(r,e).apply(this,arguments)};if(process.noDeprecation===!0)return r;var t=!1;function o(){if(!t){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return o};var B={},be;h.debuglog=function(r){if(g(be)&&(be=process.env.NODE_DEBUG||""),r=r.toUpperCase(),!B[r])if(new RegExp("\\b"+r+"\\b","i").test(be)){var e=process.pid;B[r]=function(){var t=h.format.apply(h,arguments);console.error("%s %d: %s",r,e,t)}}else B[r]=function(){};return B[r]};function v(r,e){var t={seen:[],stylize:oa};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),Ae(e)?t.showHidden=e:e&&h._extend(t,e),g(t.showHidden)&&(t.showHidden=!1),g(t.depth)&&(t.depth=2),g(t.colors)&&(t.colors=!1),g(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=ta),U(t,r,t.depth)}h.inspect=v;v.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};v.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ta(r,e){var t=v.styles[e];return t?"["+v.colors[t][0]+"m"+r+"["+v.colors[t][1]+"m":r}function oa(r,e){return r}function aa(r){var e={};return r.forEach(function(t,o){e[t]=!0}),e}function U(r,e,t){if(r.customInspect&&e&&K(e.inspect)&&e.inspect!==h.inspect&&!(e.constructor&&e.constructor.prototype===e)){var o=e.inspect(t,r);return F(o)||(o=U(r,o,t)),o}var n=na(r,e);if(n)return n;var a=Object.keys(e),s=aa(a);if(r.showHidden&&(a=Object.getOwnPropertyNames(e)),J(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return Ne(e);if(a.length===0){if(K(e)){var c=e.name?": "+e.name:"";return r.stylize("[Function"+c+"]","special")}if(H(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(xe(e))return r.stylize(Date.prototype.toString.call(e),"date");if(J(e))return Ne(e)}var m="",p=!1,y=["{","}"];if(yo(e)&&(p=!0,y=["[","]"]),K(e)){var f=e.name?": "+e.name:"";m=" [Function"+f+"]"}if(H(e)&&(m=" "+RegExp.prototype.toString.call(e)),xe(e)&&(m=" "+Date.prototype.toUTCString.call(e)),J(e)&&(m=" "+Ne(e)),a.length===0&&(!p||e.length==0))return y[0]+m+y[1];if(t<0)return H(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var l;return p?l=ia(r,e,t,s,a):l=a.map(function(d){return De(r,e,t,s,d,p)}),r.seen.pop(),sa(l,m,y)}function na(r,e){if(g(e))return r.stylize("undefined","undefined");if(F(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(fo(e))return r.stylize(""+e,"number");if(Ae(e))return r.stylize(""+e,"boolean");if(P(e))return r.stylize("null","null")}function Ne(r){return"["+Error.prototype.toString.call(r)+"]"}function ia(r,e,t,o,n){for(var a=[],s=0,c=e.length;s<c;++s)lo(e,String(s))?a.push(De(r,e,t,o,String(s),!0)):a.push("");return n.forEach(function(m){m.match(/^\d+$/)||a.push(De(r,e,t,o,m,!0))}),a}function De(r,e,t,o,n,a){var s,c,m;if(m=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},m.get?m.set?c=r.stylize("[Getter/Setter]","special"):c=r.stylize("[Getter]","special"):m.set&&(c=r.stylize("[Setter]","special")),lo(o,n)||(s="["+n+"]"),c||(r.seen.indexOf(m.value)<0?(P(t)?c=U(r,m.value,null):c=U(r,m.value,t-1),c.indexOf(`
`)>-1&&(a?c=c.split(`
`).map(function(p){return"  "+p}).join(`
`).substr(2):c=`
`+c.split(`
`).map(function(p){return"   "+p}).join(`
`))):c=r.stylize("[Circular]","special")),g(s)){if(a&&n.match(/^\d+$/))return c;s=JSON.stringify(""+n),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=r.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=r.stylize(s,"string"))}return s+": "+c}function sa(r,e,t){var o=0,n=r.reduce(function(a,s){return o++,s.indexOf(`
`)>=0&&o++,a+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function yo(r){return Array.isArray(r)}h.isArray=yo;function Ae(r){return typeof r=="boolean"}h.isBoolean=Ae;function P(r){return r===null}h.isNull=P;function ma(r){return r==null}h.isNullOrUndefined=ma;function fo(r){return typeof r=="number"}h.isNumber=fo;function F(r){return typeof r=="string"}h.isString=F;function ca(r){return typeof r=="symbol"}h.isSymbol=ca;function g(r){return r===void 0}h.isUndefined=g;function H(r){return T(r)&&ge(r)==="[object RegExp]"}h.isRegExp=H;function T(r){return typeof r=="object"&&r!==null}h.isObject=T;function xe(r){return T(r)&&ge(r)==="[object Date]"}h.isDate=xe;function J(r){return T(r)&&(ge(r)==="[object Error]"||r instanceof Error)}h.isError=J;function K(r){return typeof r=="function"}h.isFunction=K;function pa(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r=="undefined"}h.isPrimitive=pa;h.isBuffer=po();function ge(r){return Object.prototype.toString.call(r)}function we(r){return r<10?"0"+r.toString(10):r.toString(10)}var ua=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ya(){var r=new Date,e=[we(r.getHours()),we(r.getMinutes()),we(r.getSeconds())].join(":");return[r.getDate(),ua[r.getMonth()],e].join(" ")}h.log=function(){console.log("%s - %s",ya(),h.format.apply(h,arguments))};h.inherits=uo();h._extend=function(r,e){if(!e||!T(e))return r;for(var t=Object.keys(e),o=t.length;o--;)r[t[o]]=e[t[o]];return r};function lo(r,e){return Object.prototype.hasOwnProperty.call(r,e)}});var xo=z(ha=>{wo(ha,{NDArray:()=>b,NDIter:()=>u,NDMultiIter:()=>D,V_MAXDIMS:()=>w,abs:()=>Y,acos:()=>X,acosh:()=>Z,add:()=>rr,angle:()=>er,array:()=>i,asin:()=>tr,asinh:()=>or,atan:()=>ar,atanh:()=>nr,augment:()=>S,binOp:()=>ir,cbrt:()=>sr,ceil:()=>mr,check:()=>cr,combine:()=>pr,copy:()=>ur,cos:()=>yr,cosh:()=>fr,cross:()=>lr,det:()=>hr,diagonal:()=>dr,dot:()=>br,eig:()=>Ar,equals:()=>Nr,equidimensional:()=>Dr,equilateral:()=>xr,exp:()=>gr,expm1:()=>wr,eye:()=>I,fill:()=>vr,floor:()=>Ir,forEach:()=>kr,fround:()=>Er,gauss:()=>Lr,get:()=>Tr,inv:()=>Gr,log:()=>Sr,log10:()=>Rr,log1p:()=>qr,log2:()=>Mr,lu:()=>jr,lu_factor:()=>Or,magic:()=>Te,map:()=>zr,matrix:()=>q,max:()=>_r,mean:()=>Cr,min:()=>Pr,multiply:()=>Fr,norm:()=>Br,normalize:()=>Ur,ones:()=>Ge,pow:()=>Hr,prod:()=>Jr,product:()=>Kr,project:()=>$r,push:()=>Wr,random:()=>Se,range:()=>Re,rank:()=>Vr,reciprocal:()=>Yr,reduce:()=>Xr,reshape:()=>Zr,round:()=>Qr,row_add:()=>re,scale:()=>ee,set:()=>te,sign:()=>oe,sin:()=>ae,sinh:()=>ne,slice:()=>ie,solve:()=>se,sqrt:()=>me,square:()=>ce,subtract:()=>pe,sum:()=>ue,swap:()=>ye,tan:()=>fe,tanh:()=>le,toArray:()=>he,toString:()=>ve,trace:()=>ke,transpose:()=>Ee,trunc:()=>Le,zeros:()=>N})});const $=r=>r.reduce((e,t)=>e.concat(Array.isArray(t)?$(t):t),[]),W=r=>ArrayBuffer.isView(r)&&!(r instanceof DataView),_=r=>r.reduce((e,t)=>e*t,1),V=r=>Array.isArray(r)||W(r)?[r.length].concat(V(r[0])):[],E=r=>[...r.slice(1).map((e,t)=>r.slice(t+1).reduce((o,n)=>o*n,1)),1],Me=r=>{const{constructor:{name:e="Float32Array"}={}}=r||{};switch(e){case"Int8Array":return"int8";case"Uint8Array":return"uint8";case"Int16Array":return"int16";case"Uint16Array":return"uint16";case"Int32Array":return"int32";case"Uint32Array":return"uint32";case"Uint8ClampedArray":return"uint8c";case"Float32Array":return"float32";case"Float64Array":return"float64";default:return"float64"}},x=r=>{switch(r){case"int8":return Int8Array;case"uint8":return Uint8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"uint8c":return Uint8ClampedArray;case"float32":return Float32Array;case"float64":return Float64Array;default:return Float64Array}};const i=(...r)=>new b(...r);const w=32;class u{constructor(r){this.x=i(r);const{shape:e,strides:t,length:o}=this.x;this.length=o,this.lengthm1=o-1,this.nd=e.length,this.ndm1=this.nd-1,this.shape=Array(w).fill(0),this.strides=Array(w).fill(0),this.shapem1=Array(w).fill(0),this.coords=Array(w).fill(0),this.backstrides=Array(w).fill(0),this.factors=Array(w).fill(0),this.nd!==0&&(this.factors[this.nd-1]=1),this.contiguous=!1;let n=1,a;for(a=0;a<this.nd;a+=1)this.shape[a]=e[a],this.shapem1[a]=e[a]-1,this.strides[a]=t[a],this.backstrides[a]=t[a]*this.shapem1[a],this.coords[a]=0,e[this.ndm1-a]!==1&&(t[a]!==n&&(this.contiguous=!0),n*=e[this.ndm1-a]),a>0&&(this.factors[this.ndm1-a]=this.factors[this.nd-a]*e[this.nd-a]);this.index=0,this.pos=0}done(){return this.index>this.lengthm1}current(){const r=this.done();return{value:r?void 0:this.pos,done:r}}next1d(){const{strides:r}=this;this.pos+=r[0],this.coords[0]+=1}nextcontiguous(){this.pos+=1}next2d(){const{strides:r,shapem1:e,backstrides:t}=this;this.coords[1]<e[1]?(this.coords[1]+=1,this.pos+=r[1]):(this.coords[1]=0,this.coords[0]+=1,this.pos+=r[0]-t[1])}nextnd(){const{ndm1:r,shapem1:e,strides:t,backstrides:o}=this;let n;for(n=r;n>=0;n-=1){if(this.coords[n]<e[n]){this.coords[n]+=1,this.pos+=t[n];break}this.coords[n]=0,this.pos-=o[n]}}next(){const r=this.current();this.index+=1;const{ndm1:e,contiguous:t}=this;return e===0?this.next1d():t?this.nextcontiguous():e===1?this.next2d():this.nextnd(),r}[Symbol.iterator](){return this}}class D{constructor(...r){this.iters=r.map(c=>new u(c)),this.numiter=r.length;let e,t;for(e=0,t=0;e<this.numiter;e+=1)t=Math.max(t,this.iters[e].x.shape.length);this.nd=t,this.shape=Array(t).fill(0);let o,n,a,s;for(e=0;e<t;e+=1)for(this.shape[e]=1,n=0;n<this.numiter;n+=1)if(o=this.iters[n],a=e+o.x.shape.length-t,a>=0){if(s=o.x.shape[a],s==1)continue;if(this.shape[e]==1)this.shape[e]=s;else if(this.shape[e]!==s)throw new Error("shape mismatch")}for(s=this.shape.reduce((c,m)=>c*m,1),this.length=s,this.lengthm1=s-1,e=0;e<this.numiter;e+=1)for(o=this.iters[e],o.nd=this.nd,o.ndm1=this.nd-1,o.length=s,o.lengthm1=s-1,t=o.x.shape.length,t!==0&&(o.factors[this.nd-1]=1),n=0;n<this.nd;n+=1)o.shape[n]=this.shape[n],o.shapem1[n]=this.shape[n]-1,a=n+t-this.nd,a<0||o.x.shape[a]!==this.shape[n]?(o.contiguous=!1,o.strides[n]=0):o.strides[n]=o.x.strides[a],o.backstrides[n]=o.strides[n]*o.shapem1[n],n>0&&(o.factors[this.nd-n-1]=o.factors[this.nd-n]*this.shape[this.nd-n]);this.index=0,this.pos=Array(this.numiter).fill(0)}done(){return this.index>this.lengthm1}current(){const r=this.done();return{value:r?void 0:this.pos,done:r}}next(){const r=this.current();this.index+=1;const{numiter:e}=this;let t,o;for(o=0;o<e;o+=1)t=this.iters[o],this.pos[o]=t.pos,t.next();return r}[Symbol.iterator](){return this}}const{abs:ko}=Math,Y=r=>i(r).abs();function je(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=ko(r[t]);return this}const{acos:Eo}=Math,X=r=>i(r).acos();function Oe(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Eo(r[t]);return this}const{acosh:Lo}=Math,Z=r=>i(r).acosh();function ze(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Lo(r[t]);return this}let A;try{A=require("nblas")}catch(r){}const Q=A&&A.NoTrans,Ra=A&&A.Trans;function _e(r,e,t,o,n,a,s){if(o.length/n!==e||a.length/s!==e)throw new Error("lengths do not match");switch(r){case"float64":return A.daxpy(e,t,o,n,a,s);case"float32":return A.saxpy(e,t,o,n,a,s);default:throw new Error("wrong dtype")}}function Ce(r,e,t,o,n,a){if(t.length/o!==e||n.length/a!==e)throw new Error("lengths do not match");switch(r){case"float64":return A.ddot(e,t,o,n,a);case"float32":return A.sdot(e,t,o,n,a);default:throw new Error("wrong dtype")}}function Pe(r,e,t,o){if(t.length/o!==e)throw new Error("lengths do not match");switch(r){case"float64":return A.idamax(e,t,o);case"float32":return A.isamax(e,t,o);default:throw new Error("wrong dtype")}}function Fe(r,e,t,o,n,a,s,c,m,p,y,f,l,d){const{length:G}=c,{length:M}=p,{length:j}=l;if(e===A.NoTrans&&G!==m*o||e===A.Trans&&G!==m*a)throw new Error("lengths do not match");if(t===A.NoTrans&&M!==y*a||t===A.Trans&&M!==y*n)throw new Error("lengths do not match");if(j!==d*o)throw new Error("lengths do not match");switch(r){case"float64":return A.dgemm(e,t,o,n,a,s,c,m,p,y,f,l,d);case"float32":return A.sgemm(e,t,o,n,a,s,c,m,p,y,f,l,d);default:throw new Error("wrong dtype")}}function Be(r,e,t,o){if(t.length/o!==e)throw new Error("lengths do not match");switch(r){case"float64":return A.dnrm2(e,t,o);case"float32":return A.snrm2(e,t,o);default:throw new Error("wrong dtype")}}function Ue(r,e,t,o,n){if(o.length/n!==e)throw new Error("lengths do not match");switch(r){case"float64":return A.dscal(e,t,o,n);case"float32":return A.sscal(e,t,o,n);default:throw new Error("wrong dtype")}}const rr=(r,e,t=1)=>i(r).add(i(e),t);function He(r,e=1){const{data:t,length:o,strides:n,dtype:a}=this,{data:s,strides:c}=i(r);try{const m=c[c.length-1],p=n[n.length-1];if(m!==p)throw new Error("inc_x and inc_y must be equal");_e(a,o,e,s,m,t,p)}catch(m){const p=new D(this,r);for(const[y,f]of p)t[y]+=e*s[f]}return this}const{acos:To}=Math,er=(r,e)=>i(r).angle(i(e));function Je(r){return To(this.dot(i(r))/this.norm()/i(r).norm())}const{asin:Go}=Math,tr=r=>i(r).asin();function Ke(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Go(r[t]);return this}const{asinh:So}=Math,or=r=>i(r).asinh();function $e(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=So(r[t]);return this}const{atan:Ro}=Math,ar=r=>i(r).atan();function We(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Ro(r[t]);return this}const{atanh:qo}=Math,nr=r=>i(r).atanh();function Ve(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=qo(r[t]);return this}const N=(...r)=>new b(new Float64Array(r.reduce((e,t)=>e*t,1)),{shape:r}).fill(0);const S=(r,e)=>i(r).augment(i(e));function Ye(r){const[e,t]=this.shape,[o,n]=i(r).shape,{data:a}=this,{data:s}=i(r);if(o===0||n===0)return this;if(e!==o)throw new Error("rows do not match");const c=N(e,t+n),{data:m}=c;let p,y;for(p=0;p<e;p+=1)for(y=0;y<t;y+=1)m[p*(t+n)+y]=a[p*t+y];for(p=0;p<o;p+=1)for(y=0;y<n;y+=1)m[p*(t+n)+(y+t)]=s[p*n+y];return c}const ir=(r,e,t)=>i(r).binOp(i(e),t);function Xe(r,e){const{data:t}=this,{data:o}=i(r),n=new D(this,r);for(const[a,s]of n)t[a]=e(t[a],o[s],a);return this}const{cbrt:Mo}=Math,sr=r=>i(r).cbrt();function Ze(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Mo(r[t]);return this}const{ceil:jo}=Math,mr=r=>i(r).ceil();function Qe(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=jo(r[t]);return this}const cr=(r,...e)=>{i(r).check(...e)};function rt(...r){const{shape:e,length:t}=this;if(r.length===1){const[o]=r;if(o<0||o>t-1||!Number.isFinite(o))throw new Error("index out of bounds")}else if(!e.every((o,n)=>o>r[n]&&Number.isFinite(r[n])&&r[n]>=0))throw new Error("index out of bounds")}const pr=(r,e)=>i(r).combine(i(e));function et(r){if(this.shape.length!==1&&r.shape.length!==1)throw new Error("combine operation not permitted for multidimensional arrays");const{length:e,data:t}=this,{length:o,data:n}=r;if(o===0)return this;if(e===0)return this.data=new(x(r.dtype))(n),this.length=o,this.dtype=r.dtype,this;const a=e+o,s=new(x(this.dtype))(a);return s.set(t),s.set(n,e),this.data=s,this.length=a,this.shape=[a],this}const ur=r=>i(r).copy();function tt(){const r=N(...this.shape),{data:e}=this,{data:t}=r,o=new D(this,r);for(const[n,a]of o)t[a]=e[n];return r}const{cos:Oo}=Math,yr=r=>i(r).cos();function ot(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Oo(r[t]);return this}const{cosh:zo}=Math,fr=r=>i(r).cosh();function at(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=zo(r[t]);return this}const lr=(r,e)=>i(r).cross(i(e));function nt(r){const{length:e}=this,{length:t}=r;if(e!==3||t!==3)throw new Error("vectors must have three components");const o=this.y*r.z-this.z*r.y,n=this.z*r.x-this.x*r.z,a=this.x*r.y-this.y*r.x;return this.x=o,this.y=n,this.z=a,this}const hr=r=>i(r).det();function it(){this.square();const[r]=this.shape,[e,t]=this.copy().lu_factor(),{data:o}=e;let n=1,a=1,s;for(s=0;s<r;s+=1)n*=o[s*r+s],s!==t[s]-1&&(a*=-1);return a*n}const dr=r=>i(r).diagonal();function st(){this.square();const{length:r}=this,[e,t]=this.shape,o=Math.min(e,t);return this.reshape(r).slice(0,r,o+1)}const br=(r,e)=>i(r).dot(i(e));function mt(r){const{data:e,length:t,strides:o,dtype:n}=this,{data:a,strides:s}=r;let c=0;try{const m=s[s.length-1],p=o[o.length-1];if(m!==p)throw new Error("inc_x and inc_y must be equal");c=Ce(n,t,a,m,e,p)}catch(m){const p=new D(this,r);for(const[y,f]of p)c+=e[y]*a[f]}return c}const I=r=>{const e=new b(new Float64Array(r*r),{shape:[r,r]}),{data:t}=e;let o;for(o=0;o<r;o+=1)t[o*r+o]=1;return e};let R;try{R=require("nlapack")}catch(r){}const C=(r,e,t,o,n,a,s)=>{const[c]=r.shape,{data:m}=r,p=m[o*c+n],y=1/(e+t);m[o*c+n]=p-t*(m[a*c+s]+y*p),m[a*c+s]+=t*(p-y*m[a*c+s])},Ar=r=>i(r).eig();function ct(){this.square();const[r]=this.shape;try{["float32","float64"].includes(this.dtype)||(this.dtype="float32",this.data=x(this.dtype).from(this.data));const e=R.NoEigenvector,t=R.Eigenvector,o=N(r),n=N(r),a=N(r,r),s=N(r,r),{data:c}=this,{data:m}=o,{data:p}=n,{data:y}=a,{data:f}=s;return this.dtype==="float64"&&R.dgeev(e,t,r,c,r,m,p,y,r,f,r),this.dtype==="float32"&&R.sgeev(e,t,r,c,r,m,p,y,r,f,r),[o,s]}catch(e){const{data:t}=this,o=I(r);let n=0,a=0,s=0,c=0,m=0;do{for(a=0;a<r;a+=1)for(s=a+1;s<r;s+=1)Math.abs(t[a*r+s])>=n&&(n=Math.abs(t[a*r+s]),c=a,m=s);let p;if(Math.abs(t[c*r+m])<Math.abs(t[m*r+m])*1e-36)p=t[c*r+m]/t[m*r+m];else{const d=t[m*r+m]/2*t[c*r+m];p=1/(Math.abs(d)+Math.sqrt(d*d+1))}const y=1/Math.sqrt(p*p+1),f=p*y,l=t[c*r+m];for(t[c*r+m]=0,t[c*r+c]-=p*l,t[m*r+m]+=p*l,a=0;a<c;a+=1)C(this,y,f,a,c,a,m);for(a=c+1;a<m;a+=1)C(this,y,f,c,a,a,m);for(a=m+1;a<r;a+=1)C(this,y,f,c,a,m,a);for(a=0;a<r;a+=1)C(o,y,f,a,c,a,m)}while(n>=1e-9);return[this.diagonal(),o]}}const Nr=(r,e,t=1e-6)=>i(r).equals(i(e),t);function pt(r,e=1e-6){const{data:t}=this,{data:o}=r,n=new D(this,r);for(const[a,s]of n)if(Math.abs(t[a]-o[s])>e)return!1;return!0}const Dr=(r,e)=>{i(r).equidimensional(i(e))};function ut(r){const{shape:e}=this,{shape:t}=r;if(!e.every((o,n)=>o===t[n]))throw new Error(`shapes ${e} and ${t} do not match`)}const xr=(r,e)=>{i(r).equilateral(i(e))};function yt(r){const{length:e}=this,{length:t}=r;if(e!==t)throw new Error(`lengths ${e} and ${t} do not match`)}const{exp:_o}=Math,gr=r=>i(r).exp();function ft(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=_o(r[t]);return this}const{expm1:Co}=Math,wr=r=>i(r).expm1();function lt(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Co(r[t]);return this}const vr=(r,e=0)=>i(r).fill(e);function ht(r=0){const{data:e}=this,t=new u(this);for(const o of t)e[o]=r instanceof Function?r(t.pos):r;return this}const{floor:Po}=Math,Ir=r=>i(r).floor();function dt(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Po(r[t]);return this}const kr=(r,e)=>{r.forEach(e)};function bt(r){const{data:e}=this,t=new u(this);for(const o of t)r.call(this,e[o],o,e)}const{fround:Fo}=Math,Er=r=>i(r).fround();function At(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Fo(r[t]);return this}let k;try{k=require("nlapack")}catch(r){}function L(r,e,t,o,n,a){if(o.length!==e*t)throw new Error("lengths do not match");switch(r){case"float64":return k.dgetrf(e,t,o,n,a);case"float32":return k.sgetrf(e,t,o,n,a);default:throw new Error("wrong dtype")}}function Nt(r,e,t,o,n){if(t.length!==e*e)throw new Error("lengths do not match");switch(r){case"float64":return k.dgetri(e,t,o,n);case"float32":return k.sgetri(e,t,o,n);default:throw new Error("wrong dtype")}}function Dt(r,e,t,o,n,a,s,c){if(o.length!==n*e||s.length!==c*t)throw new Error("lengths do not match");switch(r){case"float64":return k.dgesv(e,t,o,n,a,s,c);case"float32":return k.sgesv(e,t,o,n,a,s,c);default:throw new Error("wrong dtype")}}const Lr=r=>i(r).gauss();function xt(){const{shape:[r,e],data:t,dtype:o}=this;try{const{data:n}=this,a=new Int32Array(Math.min(r,e));L(o,r,e,n,e,a);const s=new u(this);let[c,m]=s.coords;for(const p of s)m<c&&(n[p]=0),[c,m]=s.coords}catch(n){let a=0,s,c,m,p,y;for(m=0;m<r;m+=1){if(e<=a)return this;for(p=m;t[p*e+a]===0;)if(p+=1,r===p&&(p=m,a+=1,e===a))return this;if(m!==p&&this.swap(m,p),c=t[m*e+a],c!==0)for(y=0;y<e;y+=1)t[m*e+y]/=c;for(p=0;p<r;p+=1)if(s=t[p*e+a],p!==m)for(y=0;y<e;y+=1)t[p*e+y]-=t[m*e+y]*s;a+=1}for(m=0;m<r;m+=1){for(c=0,p=0;p<e;p+=1)c===0&&(c=t[m*e+p]);if(c===0)for(y=0;y<e;y+=1)t[m*e+y]/=c}}return this}const Tr=(r,...e)=>i(r).get(...e);function gt(...r){this.check(...r);const{data:e,shape:t}=this,{length:o}=t;let n=r[o-1],a,s;for(a=0;a<o-1;a+=1){let c=1;for(s=a+1;s<o;s+=1)c*=t[s];n+=r[a]*c}return e[n]}const Gr=r=>i(r).inv();function wt(){this.square();const{shape:[r],dtype:e}=this;try{const{data:t}=this,o=new Int32Array(r);return L(e,r,r,t,r,o),Nt(e,r,t,r,o),this}catch(t){const o=I(r),n=S(this,o).gauss(),a=N(r,r),s=N(r,r),{data:c}=n,{data:m}=a,{data:p}=s,y=new u(n);let[f,l]=y.coords;for(const d of y)l<r?m[f*r+l]=c[d]:p[f*r+(l-r)]=c[d],[f,l]=y.coords;if(!a.equals(o))throw new Error("matrix is not invertible");return s}}const{log:Bo}=Math,Sr=r=>i(r).log();function vt(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Bo(r[t]);return this}const{log10:Uo}=Math,Rr=r=>i(r).log10();function It(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Uo(r[t]);return this}const{log1p:Ho}=Math,qr=r=>i(r).log1p();function kt(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Ho(r[t]);return this}const{log2:Jo}=Math,Mr=r=>i(r).log2();function Et(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Jo(r[t]);return this}const jr=r=>i(r).lu();function Lt(){const[r,e]=this.copy().lu_factor(),t=r.copy(),o=r.copy(),{data:n}=t,{data:a}=o,s=new u(r);let[c,m]=s.coords;for(const p of s)m<c?a[p]=0:n[p]=c===m?1:0,[c,m]=s.coords;return[t,o,e]}const Or=r=>i(r).lu_factor();function Tt(){const{data:r,shape:[e],dtype:t}=this,o=new Int32Array(e);try{L(t,e,e,r,e,o)}catch(n){let a,s,c,m,p,y,f;for(f=0;f<e;f+=1){for(m=f,a=Math.abs(r[f*e+f]),y=f+1;y<e;y+=1)s=Math.abs(r[y*e+f]),a<s&&(a=s,m=y);for(o[f]=m+1,m!==f&&this.swap(f,m),c=r[f*e+f],p=f+1;p<e;p+=1)r[p*e+f]/=c;for(p=f+1;p<e;p+=1){for(y=f+1;y<e-1;y+=2)r[p*e+y]-=r[p*e+f]*r[f*e+y],r[p*e+y+1]-=r[p*e+f]*r[f*e+y+1];y===e-1&&(r[p*e+y]-=r[p*e+f]*r[f*e+y])}}}return[this,o]}const zr=(r,e)=>i(r).map(e);function Gt(r){const{data:e}=this,t=new u(this),o=r.bind(this),n=this.copy(),{data:a}=n;for(const s of t)a[s]=o(e[s],s,e);return n}const _r=r=>i(r).max();function St(){const{data:r,length:e,strides:t,dtype:o}=this;let n=Number.NEGATIVE_INFINITY;try{const a=t[t.length-1];n=r[Pe(o,e,r,a)]}catch(a){const s=new u(this);for(const c of s){const m=r[c];n<m&&(n=m)}}return n}const Cr=r=>i(r).mean();function Rt(){const{data:r,length:e}=this,t=new u(this);let o=0;for(const n of t)o+=r[n];return o/e}const Pr=r=>i(r).min();function qt(){const{data:r}=this,e=new u(this);let t=Number.POSITIVE_INFINITY;for(const o of e){const n=r[o];t>n&&(t=n)}return t}const q=(r,e)=>new b(new Float64Array(r*e),{shape:[r,e]});const Fr=(r,e)=>i(r).multiply(i(e));function Mt(r){const{shape:[e,t],data:o,dtype:n}=this,{shape:[a,s],data:c}=r;if(t!==a)throw new Error("sizes do not match");const m=q(e,s),{data:p}=m;try{Fe(n,Q,Q,e,s,t,1,o,t,c,s,0,p,s)}catch(y){const f=new u(m);let l,[d,G]=f.coords;for(const M of f){let j=0;for(l=0;l<t;l+=1)j+=o[d*t+l]*c[l*s+G];p[M]=j,[d,G]=f.coords}}return m}const{sqrt:Ko}=Math,Br=r=>i(r).norm();function jt(){const{data:r,length:e,strides:t,dtype:o}=this;let n=0;try{const a=t[t.length-1];n=Be(o,e,r,a)}catch(a){n=Ko(this.dot(this))}return n}const Ur=r=>i(r).normalize();function Ot(){return this.scale(1/this.norm())}const{pow:$o}=Math,Hr=(r,e)=>i(r).pow(e);function zt(r){const{data:e}=this,t=new u(this);for(const o of t)e[o]=$o(e[o],r);return this}const Jr=r=>i(r).prod();function _t(){const{data:r}=this,e=new u(this);let t=1;for(const o of e)t*=r[o];return t}const Kr=(r,e)=>i(r).product(i(e));function Ct(r){const{data:e}=this,{data:t}=r,o=new D(this,r);for(const[n,a]of o)e[n]*=t[a];return this}const $r=(r,e)=>i(r).project(i(e));function Pt(r){return r.scale(this.dot(r)/r.dot(r))}const Wr=(r,e)=>i(r).push(e);function Ft(r){if(this.shape.length!==1)throw new Error("push operation not permitted for multidimensional arrays");const{data:e,length:t}=this,o=t+1,n=new(x(this.dtype))(o);return n.set(e),n[t]=r,this.data=n,this.length=o,this.shape=[o],this}const Vr=(r,e=1e-6)=>i(r).rank(e);function Bt(r=1e-6){const{data:e}=this.copy().gauss(),t=new u(this);let o=0,[n,a]=t.coords;for(const s of t)o<=n&&a>=n&&e[s]>r&&(o+=1),[n,a]=t.coords;return o}const Yr=r=>i(r).reciprocal();function Ut(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=1/r[t];return this}const Xr=(r,e,t)=>i(r).reduce(e,t);function Ht(r,e){const{data:t,length:o}=this;if(o===0&&typeof e=="undefined")throw new Error("Reduce of empty array with no initial value.");const n=new u(this),a=r.bind(this);let s;typeof e=="undefined"?(s=t[0],n.next()):s=e;for(const c of n)s=a(s,t[c],c,t);return s}const Zr=(r,...e)=>i(r).reshape(...e);function Jt(...r){const{length:e}=this;if(r.reduce((t,o)=>t*o,1)!==e)throw new Error(`shape ${r} does not match length ${e}`);return this.shape=r,this.strides=E(r),this}const{round:Wo}=Math,Qr=r=>i(r).round();function Kt(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Wo(r[t]);return this}const re=(r,e,t,o=1)=>i(r).row_add(e,t,o);function $t(r,e,t=1){this.check(r,0),this.check(e,0);const[,o]=this.shape,{data:n}=this;let a;for(a=0;a<o;a+=1)n[r*o+a]+=n[e*o+a]*t;return this}const ee=(r,e)=>i(r).scale(e);function Wt(r){const{data:e,length:t,strides:o,dtype:n}=this;try{const a=o[o.length-1];Ue(n,t,r,e,a)}catch(a){const s=new u(this);for(const c of s)e[c]*=r}return this}const te=(r,...e)=>{r.set(...e)};function Vt(...r){const e=r.slice(0,-1),t=r[r.length-1];this.check(...e);const{shape:o}=this;let n=e[e.length-1],a;for(a=0;a<e.length-1;a+=1)n+=e[a]*o[a+1];this.data[n]=t}const{sign:Vo}=Math,oe=r=>i(r).sign();function Yt(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Vo(r[t]);return this}const{sin:Yo}=Math,ae=r=>i(r).sin();function Xt(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Yo(r[t]);return this}const{sinh:Xo}=Math,ne=r=>i(r).sinh();function Zt(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Xo(r[t]);return this}const ie=(r,e,t,o)=>i(r).slice(e,t,o);function Qt(r=0,e=this.shape[0],t=1){const{data:o,shape:n}=this,a=n.length;if(r<0||e<0)return this.slice(r<0?n[n.length-1]+r:r,e<0?n[n.length-1]+e:e);if(r>e)return this.slice(e,r,t);if(t<=0)throw new Error("step argument has to be a positive integer");const s=[Math.ceil((e-r)/Math.abs(t)),...n.slice(1)],c=_(s),m=E(s),p=a>1?o.subarray(r*s[s.length-1],e*s[s.length-1]):o.subarray(r,e);return m[0]*=t,new b(p,{shape:s,length:c,strides:m})}const se=(r,e)=>i(r).solve(i(e));function ro(r){const{data:e,dtype:t}=this,{data:o,shape:[n,a]}=r;try{const s=new Int32Array(n);Dt(t,n,a,e,n,s,o,a)}catch(s){const[c,m]=this.lu_factor(),{data:p}=c,{data:y}=r;let f,l,d;for(f=0;f<m.length;f+=1)f!==m[f]-1&&r.swap(f,m[f]-1);for(d=0;d<a;d+=1){for(f=0;f<n;f+=1)for(l=0;l<f;l+=1)y[f*a+d]-=p[f*n+l]*y[l*a+d];for(f=n-1;f>=0;f-=1){for(l=f+1;l<n;l+=1)y[f*a+d]-=p[f*n+l]*y[l*a+d];y[f*a+d]/=p[f*n+f]}}}return r}const{sqrt:Zo}=Math,me=r=>i(r).sqrt();function eo(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Zo(r[t]);return this}const ce=r=>{i(r).square()};function to(){const{length:r}=this.shape,[e,t]=this.shape;if(r!==2||e!==t)throw new Error("matrix is not square")}const pe=(r,e)=>i(r).subtract(i(e));function oo(r){return this.add(r,-1)}const ue=r=>i(r).sum();function ao(){const{data:r}=this,e=new u(this);let t=0;for(const o of e)t+=r[o];return t}const ye=(r,e,t)=>i(r).swap(e,t);function no(r,e){this.check(r,0),this.check(e,0);const{data:t}=this,[,o]=this.shape,n=t.slice(r*o,(r+1)*o);return t.copyWithin(r*o,e*o,(e+1)*o),t.set(n,e*o),this}const{tan:Qo}=Math,fe=r=>i(r).tan();function io(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=Qo(r[t]);return this}const{tanh:ra}=Math,le=r=>i(r).tanh();function so(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=ra(r[t]);return this}const he=r=>i(r).toArray();function mo(r=0,e=0){const{data:t,shape:o,strides:n}=this,{length:a}=o;if(e>=a)return t[r];const s=o[e],c=n[e],m=[];for(let p=0;p<s;p++){const y=this.toArray(r,e+1);if(y===null)return null;m[p]=y,r+=c}return m}const bo=Io(ho());const ve=r=>i(r).toString();function Ie(){return`array(${bo.inspect(this.toArray(),{depth:10,breakLength:40})}, dtype=${this.dtype})`}const ke=r=>i(r).trace();function Ao(){const[r,e]=this.shape,{data:t}=this,o=Math.min(r,e);let n=0,a;for(a=0;a<o;a+=1)n+=t[a*e+a];return n}const Ee=r=>i(r).transpose();function No(){if(this.shape.length<2)return this;let r=this.shape[0];return this.shape[0]=this.shape[1],this.shape[1]=r,r=this.strides[0],this.strides[0]=this.strides[1],this.strides[1]=r,this}const{trunc:fa}=Math,Le=r=>i(r).trunc();function Do(){const{data:r}=this,e=new u(this);for(const t of e)r[t]=fa(r[t]);return this}const Te=r=>{if(r<0)throw new Error("invalid n");const e=new Float64Array(r*r),t=new b(e,{shape:[r,r]}),o=new u(t);let[n,a]=o.coords;for(const s of o){const c=r-n-1,m=r-a-1;e[s]=(a+c*2+1)%r*r+(m+c*2+1)%r+1,[n,a]=o.coords}return t};const Ge=(...r)=>new b(new Float64Array(r.reduce((e,t)=>e*t,1)),{shape:r}).fill(1);const Se=(...r)=>new b(new Float64Array(r.reduce((e,t)=>e*t,1)),{shape:r}).map(()=>Math.random());const Re=(...r)=>{const e=Float64Array;let t=!1,o,n,a;switch(r.length){case 2:a=r.pop(),n=1,o=r.pop();break;case 3:a=r.pop(),n=r.pop(),o=r.pop();break;default:throw new Error("invalid range")}if(a-o<0){const p=a;a=o,o=p,t=!0}if(n>a-o)throw new Error("invalid range");const s=new e(Math.ceil((a-o)/n));let c=o,m=0;if(t)for(;c<a;c+=n,m+=1)s[m]=a-c+o;else for(;c<a;c+=n,m+=1)s[m]=c;return new b(s)};const la=Symbol.for("nodejs.util.inspect.custom");var sy;class b{constructor(r,e){this.data=new Float64Array(0);this.dtype="float64";this.length=0;this.shape=[0];this.strides=[0];this[sy]=Ie;this.abs=je;this.acos=Oe;this.acosh=ze;this.add=He;this.angle=Je;this.asin=Ke;this.asinh=$e;this.atan=We;this.atanh=Ve;this.augment=Ye;this.binOp=Xe;this.cbrt=Ze;this.ceil=Qe;this.check=rt;this.combine=et;this.copy=tt;this.cos=ot;this.cosh=at;this.cross=nt;this.det=it;this.diagonal=st;this.dot=mt;this.eig=ct;this.equals=pt;this.equidimensional=ut;this.equilateral=yt;this.exp=ft;this.expm1=lt;this.fill=ht;this.floor=dt;this.forEach=bt;this.fround=At;this.gauss=xt;this.get=gt;this.inv=wt;this.log=vt;this.log10=It;this.log1p=kt;this.log2=Et;this.lu=Lt;this.lu_factor=Tt;this.map=Gt;this.max=St;this.mean=Rt;this.min=qt;this.multiply=Mt;this.norm=jt;this.normalize=Ot;this.pow=zt;this.prod=_t;this.product=Ct;this.project=Pt;this.push=Ft;this.rank=Bt;this.reciprocal=Ut;this.reduce=Ht;this.reshape=Jt;this.round=Kt;this.row_add=$t;this.scale=Wt;this.set=Vt;this.sign=Yt;this.sin=Xt;this.sinh=Zt;this.slice=Qt;this.solve=ro;this.sqrt=eo;this.square=to;this.subtract=oo;this.sum=ao;this.swap=no;this.tan=io;this.tanh=so;this.toArray=mo;this.toString=Ie;this.trace=Ao;this.transpose=No;this.trunc=Do;if(!r)return;if(r instanceof b)return r;if(r instanceof u){if(!e||!e.dtype)throw new Error("dtype is missing");r.shape&&(e.shape=r.shape);const s=r.length;r=new(x(e.dtype))(s)}const{shape:t=V(r),length:o=_(t),strides:n=E(t),dtype:a=Me(r)}=e||{};this.data=W(r)?r:new(x(a))($(r)),this.shape=t,this.length=o,this.dtype=a,this.strides=n}get x(){return this.get(0)}set x(r){this.set(0,r)}get y(){return this.get(1)}set y(r){this.set(1,r)}get z(){return this.get(2)}set z(r){this.set(2,r)}get w(){return this.get(3)}set w(r){this.set(3,r)}get T(){return this.copy().transpose()}}sy=la;try{window.v=b}catch(r){}return xo();})();
//# sourceMappingURL=index.browser.js.map
