"use strict";var z=Object.defineProperty;var Ho=Object.getOwnPropertyDescriptor;var Jo=Object.getOwnPropertyNames;var Ko=Object.prototype.hasOwnProperty;var Qo=(r,t)=>{for(var o in t)z(r,o,{get:t[o],enumerable:!0})},Zo=(r,t,o,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Jo(t))!Ko.call(r,n)&&n!==o&&z(r,n,{get:()=>t[n],enumerable:!(e=Ho(t,n))||e.enumerable});return r};var re=r=>Zo(z({},"__esModule",{value:!0}),r);var _e={};Qo(_e,{NDArray:()=>l,NDIter:()=>f,NDMultiIter:()=>b,abs:()=>X,acos:()=>B,acosh:()=>P,add:()=>tr,angle:()=>er,array:()=>i,asin:()=>nr,asinh:()=>sr,atan:()=>pr,atanh:()=>cr,augment:()=>q,binOp:()=>hr,cbrt:()=>dr,ceil:()=>br,check:()=>Nr,combine:()=>gr,copy:()=>kr,cos:()=>Ir,cosh:()=>vr,cross:()=>Er,det:()=>_r,diagonal:()=>Fr,dot:()=>Sr,eig:()=>$r,equals:()=>Or,equidimensional:()=>Rr,equilateral:()=>Yr,exp:()=>Gr,expm1:()=>Wr,eye:()=>L,fill:()=>Jr,floor:()=>Qr,forEach:()=>rt,fround:()=>ot,gauss:()=>at,get:()=>it,inv:()=>ft,log:()=>ut,log10:()=>ht,log1p:()=>dt,log2:()=>bt,lu:()=>Nt,lu_factor:()=>gt,magic:()=>Bo,map:()=>kt,matrix:()=>F,max:()=>It,mean:()=>vt,min:()=>Et,multiply:()=>_t,norm:()=>Ft,normalize:()=>St,ones:()=>Go,pow:()=>$t,prod:()=>Ot,product:()=>Rt,project:()=>Yt,push:()=>Gt,random:()=>Po,range:()=>Wo,rank:()=>Wt,reciprocal:()=>Jt,reduce:()=>Qt,reshape:()=>ro,round:()=>oo,row_add:()=>ao,scale:()=>io,set:()=>mo,sign:()=>fo,sin:()=>uo,sinh:()=>ho,slice:()=>Ao,solve:()=>Do,sqrt:()=>xo,square:()=>wo,subtract:()=>Lo,sum:()=>To,swap:()=>Mo,tan:()=>qo,tanh:()=>jo,toArray:()=>zo,toString:()=>$o,trace:()=>Co,transpose:()=>Vo,trunc:()=>Xo,zeros:()=>D});module.exports=re(_e);var x=32,S=r=>r.reduce((t,o)=>t.concat(Array.isArray(o)?S(o):o),[]),U=r=>ArrayBuffer.isView(r)&&!(r instanceof DataView),E=r=>r.reduce((t,o)=>t*o,1),$=r=>Array.isArray(r)||U(r)?[r.length].concat($(r[0])):[],w=r=>[...r.slice(1).map((t,o)=>r.slice(o+1).reduce((e,n)=>e*n,1)),1],R=r=>{let{constructor:{name:t="Float32Array"}={}}=r||{};switch(t){case"Int8Array":return"int8";case"Uint8Array":return"uint8";case"Int16Array":return"int16";case"Uint16Array":return"uint16";case"Int32Array":return"int32";case"Uint32Array":return"uint32";case"Uint8ClampedArray":return"uint8c";case"Float32Array":return"float32";case"Float64Array":return"float64";default:return"float64"}},N=r=>{switch(r){case"int8":return Int8Array;case"uint8":return Uint8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"uint8c":return Uint8ClampedArray;case"float32":return Float32Array;case"float64":return Float64Array;default:return Float64Array}};var i=(...r)=>new l(...r);var f=class{x;shape;shapem1;strides;backstrides;length;lengthm1;nd;ndm1;index;coords;pos;factors;constructor(t){this.x=i(t);let{shape:o,strides:e,length:n}=this.x;this.length=n,this.lengthm1=n-1,this.nd=o.length,this.ndm1=this.nd-1,this.shape=Array(x).fill(0),this.strides=Array(x).fill(0),this.shapem1=Array(x).fill(0),this.coords=Array(x).fill(0),this.backstrides=Array(x).fill(0),this.factors=Array(x).fill(0),this.nd!==0&&(this.factors[this.nd-1]=1);let a;for(a=0;a<this.nd;a+=1)this.shape[a]=o[a],this.shapem1[a]=o[a]-1,this.strides[a]=e[a],this.backstrides[a]=e[a]*this.shapem1[a],this.coords[a]=0,a>0&&(this.factors[this.ndm1-a]=this.factors[this.nd-a]*o[this.nd-a]);this.index=0,this.pos=0}done(){return this.index>this.lengthm1}current(){let t=this.done();return{value:t?void 0:this.pos,done:t}}next(){let t=this.current();if(t.done)return t;let{ndm1:o,shapem1:e,strides:n,backstrides:a}=this,s;for(s=o;s>=0;s-=1){if(this.coords[s]<e[s]){this.coords[s]+=1,this.pos+=n[s];break}this.coords[s]=0,this.pos-=a[s]}return this.index+=1,t}[Symbol.iterator](){return this}};var b=class{iters;shape;nd;length;lengthm1;numiter;index;pos;constructor(...t){this.iters=t.map(p=>new f(p)),this.numiter=t.length;let o,e;for(o=0,e=0;o<this.numiter;o+=1)e=Math.max(e,this.iters[o].x.shape.length);this.nd=e,this.shape=Array(e).fill(0);let n,a,s,m;for(o=0;o<e;o+=1)for(this.shape[o]=1,a=0;a<this.numiter;a+=1)if(n=this.iters[a],s=o+n.x.shape.length-e,s>=0){if(m=n.x.shape[s],m==1)continue;if(this.shape[o]==1)this.shape[o]=m;else if(this.shape[o]!==m)throw new Error("shape mismatch")}for(m=this.shape.reduce((p,c)=>p*c,1),this.length=m,this.lengthm1=m-1,o=0;o<this.numiter;o+=1)for(n=this.iters[o],n.nd=this.nd,n.ndm1=this.nd-1,n.length=m,n.lengthm1=m-1,e=n.x.shape.length,e!==0&&(n.factors[this.nd-1]=1),a=0;a<this.nd;a+=1)n.shape[a]=this.shape[a],n.shapem1[a]=this.shape[a]-1,s=a+e-this.nd,s<0||n.x.shape[s]!==this.shape[a]?n.strides[a]=0:n.strides[a]=n.x.strides[s],n.backstrides[a]=n.strides[a]*n.shapem1[a],a>0&&(n.factors[this.nd-a-1]=n.factors[this.nd-a]*this.shape[this.nd-a]);this.index=0,this.pos=Array(this.numiter).fill(0)}done(){return this.index>this.lengthm1}current(){let t=this.done();return{value:t?void 0:this.pos,done:t}}next(){let t=this.current();if(t.done)return t;this.index+=1;let{numiter:o}=this,e,n;for(n=0;n<o;n+=1)e=this.iters[n],this.pos[n]=e.pos,e.next();return t}[Symbol.iterator](){return this}};var{abs:te}=Math,X=r=>i(r).abs();function Y(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=te(r[o]);return this}var{acos:oe}=Math,B=r=>i(r).acos();function G(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=oe(r[o]);return this}var{acosh:ee}=Math,P=r=>i(r).acosh();function W(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=ee(r[o]);return this}var A;try{A=require("nblas")}catch{}var C=A&&A.NoTrans,ra=A&&A.Trans;function H(r,t,o,e,n,a,s){if(e.length/n!==t||a.length/s!==t)throw new Error("lengths do not match");switch(r){case"float64":return A.daxpy(t,o,e,n,a,s);case"float32":return A.saxpy(t,o,e,n,a,s);default:throw new Error("wrong dtype")}}function J(r,t,o,e,n,a){if(o.length/e!==t||n.length/a!==t)throw new Error("lengths do not match");switch(r){case"float64":return A.ddot(t,o,e,n,a);case"float32":return A.sdot(t,o,e,n,a);default:throw new Error("wrong dtype")}}function K(r,t,o,e){if(o.length/e!==t)throw new Error("lengths do not match");switch(r){case"float64":return A.idamax(t,o,e);case"float32":return A.isamax(t,o,e);default:throw new Error("wrong dtype")}}function Q(r,t,o,e,n,a,s,m,p,c,y,u,h,d){let{length:I}=m,{length:v}=c,{length:M}=h;if(t===A.NoTrans&&I!==p*e||t===A.Trans&&I!==p*a)throw new Error("lengths do not match");if(o===A.NoTrans&&v!==y*a||o===A.Trans&&v!==y*n)throw new Error("lengths do not match");if(M!==d*e)throw new Error("lengths do not match");switch(r){case"float64":return A.dgemm(t,o,e,n,a,s,m,p,c,y,u,h,d);case"float32":return A.sgemm(t,o,e,n,a,s,m,p,c,y,u,h,d);default:throw new Error("wrong dtype")}}function Z(r,t,o,e){if(o.length/e!==t)throw new Error("lengths do not match");switch(r){case"float64":return A.dnrm2(t,o,e);case"float32":return A.snrm2(t,o,e);default:throw new Error("wrong dtype")}}function rr(r,t,o,e,n){if(e.length/n!==t)throw new Error("lengths do not match");switch(r){case"float64":return A.dscal(t,o,e,n);case"float32":return A.sscal(t,o,e,n);default:throw new Error("wrong dtype")}}var tr=(r,t,o=1)=>i(r).add(i(t),o);function or(r,t=1){let{data:o,length:e,strides:n,dtype:a}=this,{data:s,strides:m}=i(r);try{let p=m[m.length-1],c=n[n.length-1];if(p!==c)throw new Error("inc_x and inc_y must be equal");H(a,e,t,s,p,o,c)}catch{let c=new b(this,r);for(let[y,u]of c)o[y]+=t*s[u]}return this}var{acos:ae}=Math,er=(r,t)=>i(r).angle(i(t));function ar(r){return ae(this.dot(i(r))/this.norm()/i(r).norm())}var{asin:ne}=Math,nr=r=>i(r).asin();function ir(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=ne(r[o]);return this}var{asinh:ie}=Math,sr=r=>i(r).asinh();function mr(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=ie(r[o]);return this}var{atan:se}=Math,pr=r=>i(r).atan();function fr(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=se(r[o]);return this}var{atanh:me}=Math,cr=r=>i(r).atanh();function ur(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=me(r[o]);return this}var D=(...r)=>new l(new Float64Array(r.reduce((t,o)=>t*o,1)),{shape:r}).fill(0);var q=(r,t)=>i(r).augment(i(t));function yr(r){let[t,o]=this.shape,[e,n]=i(r).shape,{data:a}=this,{data:s}=i(r);if(e===0||n===0)return this;if(t!==e)throw new Error("rows do not match");let m=D(t,o+n),{data:p}=m,c,y;for(c=0;c<t;c+=1)for(y=0;y<o;y+=1)p[c*(o+n)+y]=a[c*o+y];for(c=0;c<e;c+=1)for(y=0;y<n;y+=1)p[c*(o+n)+(y+o)]=s[c*n+y];return m}var hr=(r,t,o)=>i(r).binOp(i(t),o);function lr(r,t){let{data:o}=this,{data:e}=i(r),n=new b(this,r);for(let[a,s]of n)o[a]=t(o[a],e[s],a);return this}var{cbrt:pe}=Math,dr=r=>i(r).cbrt();function Ar(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=pe(r[o]);return this}var{ceil:fe}=Math,br=r=>i(r).ceil();function Dr(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=fe(r[o]);return this}var Nr=(r,...t)=>{i(r).check(...t)};function xr(...r){let{shape:t,length:o}=this;if(r.length===1){let[e]=r;if(e<0||e>o-1||!Number.isFinite(e))throw new Error("index out of bounds")}else if(!t.every((e,n)=>e>r[n]&&Number.isFinite(r[n])&&r[n]>=0))throw new Error("index out of bounds")}var gr=(r,t)=>i(r).combine(i(t));function wr(r){if(this.shape.length!==1&&r.shape.length!==1)throw new Error("combine operation not permitted for multidimensional arrays");let{length:t,data:o}=this,{length:e,data:n}=r;if(e===0)return this;if(t===0)return this.data=new(N(r.dtype))(n),this.length=e,this.dtype=r.dtype,this;let a=t+e,s=new(N(this.dtype))(a);return s.set(o),s.set(n,t),this.data=s,this.length=a,this.shape=[a],this}var kr=r=>i(r).copy();function Lr(){let r=D(...this.shape),{data:t}=this,{data:o}=r,e=new b(this,r);for(let[n,a]of e)o[a]=t[n];return r}var{cos:ce}=Math,Ir=r=>i(r).cos();function Tr(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=ce(r[o]);return this}var{cosh:ue}=Math,vr=r=>i(r).cosh();function Mr(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=ue(r[o]);return this}var Er=(r,t)=>i(r).cross(i(t));function qr(r){let{length:t}=this,{length:o}=r;if(t!==3||o!==3)throw new Error("vectors must have three components");let e=this.y*r.z-this.z*r.y,n=this.z*r.x-this.x*r.z,a=this.x*r.y-this.y*r.x;return this.x=e,this.y=n,this.z=a,this}var _r=r=>i(r).det();function jr(){this.square();let[r]=this.shape,[t,o]=this.copy().lu_factor(),{data:e}=t,n=1,a=1,s;for(s=0;s<r;s+=1)n*=e[s*r+s],s!==o[s]-1&&(a*=-1);return a*n}var Fr=r=>i(r).diagonal();function zr(){this.square();let{length:r}=this,[t,o]=this.shape,e=Math.min(t,o);return this.reshape(r).slice(0,r,e+1)}var Sr=(r,t)=>i(r).dot(i(t));function Ur(r){let{data:t,length:o,strides:e,dtype:n}=this,{data:a,strides:s}=r,m=0;try{let p=s[s.length-1],c=e[e.length-1];if(p!==c)throw new Error("inc_x and inc_y must be equal");m=J(n,o,a,p,t,c)}catch{let c=new b(this,r);for(let[y,u]of c)m+=t[y]*a[u]}return m}var L=r=>{let t=new l(new Float64Array(r*r),{shape:[r,r]}),{data:o}=t,e;for(e=0;e<r;e+=1)o[e*r+e]=1;return t};var T;try{T=require("nlapack")}catch{}var _=(r,t,o,e,n,a,s)=>{let[m]=r.shape,{data:p}=r,c=p[e*m+n],y=1/(t+o);p[e*m+n]=c-o*(p[a*m+s]+y*c),p[a*m+s]+=o*(c-y*p[a*m+s])},$r=r=>i(r).eig();function Cr(){this.square();let[r]=this.shape;try{["float32","float64"].includes(this.dtype)||(this.dtype="float32",this.data=N(this.dtype).from(this.data));let t=T.NoEigenvector,o=T.Eigenvector,e=D(r),n=D(r),a=D(r,r),s=D(r,r),{data:m}=this,{data:p}=e,{data:c}=n,{data:y}=a,{data:u}=s;return this.dtype==="float64"&&T.dgeev(t,o,r,m,r,p,c,y,r,u,r),this.dtype==="float32"&&T.sgeev(t,o,r,m,r,p,c,y,r,u,r),[e,s]}catch{let{data:o}=this,e=L(r),n=0,a=0,s=0,m=0,p=0;do{for(a=0;a<r;a+=1)for(s=a+1;s<r;s+=1)Math.abs(o[a*r+s])>=n&&(n=Math.abs(o[a*r+s]),m=a,p=s);let c;if(Math.abs(o[m*r+p])<Math.abs(o[p*r+p])*1e-36)c=o[m*r+p]/o[p*r+p];else{let d=o[p*r+p]/2*o[m*r+p];c=1/(Math.abs(d)+Math.sqrt(d*d+1))}let y=1/Math.sqrt(c*c+1),u=c*y,h=o[m*r+p];for(o[m*r+p]=0,o[m*r+m]-=c*h,o[p*r+p]+=c*h,a=0;a<m;a+=1)_(this,y,u,a,m,a,p);for(a=m+1;a<p;a+=1)_(this,y,u,m,a,a,p);for(a=p+1;a<r;a+=1)_(this,y,u,m,a,p,a);for(a=0;a<r;a+=1)_(e,y,u,a,m,a,p)}while(n>=1e-9);return[this.diagonal(),e]}}var Or=(r,t,o=1e-6)=>i(r).equals(i(t),o);function Vr(r,t=1e-6){let{data:o}=this,{data:e}=r,n=new b(this,r);for(let[a,s]of n)if(Math.abs(o[a]-e[s])>t)return!1;return!0}var Rr=(r,t)=>{i(r).equidimensional(i(t))};function Xr(r){let{shape:t}=this,{shape:o}=r;if(!t.every((e,n)=>e===o[n]))throw new Error(`shapes ${t} and ${o} do not match`)}var Yr=(r,t)=>{i(r).equilateral(i(t))};function Br(r){let{length:t}=this,{length:o}=r;if(t!==o)throw new Error(`lengths ${t} and ${o} do not match`)}var{exp:ye}=Math,Gr=r=>i(r).exp();function Pr(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=ye(r[o]);return this}var{expm1:he}=Math,Wr=r=>i(r).expm1();function Hr(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=he(r[o]);return this}var Jr=(r,t=0)=>i(r).fill(t);function Kr(r=0){let{data:t}=this,o=new f(this);for(let e of o)t[e]=r instanceof Function?r(e):r;return this}var{floor:le}=Math,Qr=r=>i(r).floor();function Zr(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=le(r[o]);return this}var rt=(r,t)=>{r.forEach(t)};function tt(r){let{data:t}=this,o=new f(this);for(let e of o)r.call(this,t[e],e,t)}var{fround:de}=Math,ot=r=>i(r).fround();function et(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=de(r[o]);return this}var at=r=>i(r).gauss();function nt(){let{shape:[r,t],data:o}=this,e=0,n,a,s,m,p;for(s=0;s<r;s+=1){if(t<=e)return this;for(m=s;o[m*t+e]===0;)if(m+=1,r===m&&(m=s,e+=1,t===e))return this;if(s!==m&&this.swap(s,m),a=o[s*t+e],a!==0)for(p=0;p<t;p+=1)o[s*t+p]/=a;for(m=0;m<r;m+=1)if(n=o[m*t+e],m!==s)for(p=0;p<t;p+=1)o[m*t+p]-=o[s*t+p]*n;e+=1}for(s=0;s<r;s+=1){for(a=0,m=0;m<t;m+=1)a===0&&(a=o[s*t+m]);if(a!==0)for(p=0;p<t;p+=1)o[s*t+p]/=a}return this}var it=(r,...t)=>i(r).get(...t);function st(...r){this.check(...r);let{data:t,shape:o}=this,{length:e}=o,n=0,a;for(a=0;a<e;a+=1)n*=o[a],n+=r[a];return t[n]}var g;try{g=require("nlapack")}catch{}function j(r,t,o,e,n,a){if(e.length!==t*o)throw new Error("lengths do not match");switch(r){case"float64":return g.dgetrf(t,o,e,n,a);case"float32":return g.sgetrf(t,o,e,n,a);default:throw new Error("wrong dtype")}}function mt(r,t,o,e,n){if(o.length!==t*t)throw new Error("lengths do not match");switch(r){case"float64":return g.dgetri(t,o,e,n);case"float32":return g.sgetri(t,o,e,n);default:throw new Error("wrong dtype")}}function pt(r,t,o,e,n,a,s,m){if(e.length!==n*t||s.length!==m*o)throw new Error("lengths do not match");switch(r){case"float64":return g.dgesv(t,o,e,n,a,s,m);case"float32":return g.sgesv(t,o,e,n,a,s,m);default:throw new Error("wrong dtype")}}var ft=r=>i(r).inv();function ct(){this.square();let{shape:[r],dtype:t}=this;try{let{data:o}=this,e=new Int32Array(r);return j(t,r,r,o,r,e),mt(t,r,o,r,e),this}catch{let e=L(r),n=q(this,e).gauss(),a=D(r,r),s=D(r,r),{data:m}=n,{data:p}=a,{data:c}=s,y=new f(n),[u,h]=y.coords;for(let d of y)h<r?p[u*r+h]=m[d]:c[u*r+(h-r)]=m[d],[u,h]=y.coords;if(!a.equals(e))throw new Error("matrix is not invertible");return s}}var{log:Ae}=Math,ut=r=>i(r).log();function yt(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=Ae(r[o]);return this}var{log10:be}=Math,ht=r=>i(r).log10();function lt(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=be(r[o]);return this}var{log1p:De}=Math,dt=r=>i(r).log1p();function At(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=De(r[o]);return this}var{log2:Ne}=Math,bt=r=>i(r).log2();function Dt(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=Ne(r[o]);return this}var Nt=r=>i(r).lu();function xt(){let[r,t]=this.copy().lu_factor(),o=r.copy(),e=r.copy(),{data:n}=o,{data:a}=e,s=new f(r),[m,p]=s.coords;for(let c of s)p<m?a[c]=0:n[c]=m===p?1:0,[m,p]=s.coords;return[o,e,t]}var gt=r=>i(r).lu_factor();function wt(){let{data:r,shape:[t],dtype:o}=this,e=new Int32Array(t);try{j(o,t,t,r,t,e)}catch{let a,s,m,p,c,y,u;for(u=0;u<t;u+=1){for(p=u,a=Math.abs(r[u*t+u]),y=u+1;y<t;y+=1)s=Math.abs(r[y*t+u]),a<s&&(a=s,p=y);for(e[u]=p+1,p!==u&&this.swap(u,p),m=r[u*t+u],c=u+1;c<t;c+=1)r[c*t+u]/=m;for(c=u+1;c<t;c+=1){for(y=u+1;y<t-1;y+=2)r[c*t+y]-=r[c*t+u]*r[u*t+y],r[c*t+y+1]-=r[c*t+u]*r[u*t+y+1];y===t-1&&(r[c*t+y]-=r[c*t+u]*r[u*t+y])}}}return[this,e]}var kt=(r,t)=>i(r).map(t);function Lt(r){let{data:t}=this,o=new f(this),e=r.bind(this),n=this.copy(),{data:a}=n;for(let s of o)a[s]=e(t[s],s,t);return n}var It=r=>i(r).max();function Tt(){let{data:r,length:t,strides:o,dtype:e}=this,n=Number.NEGATIVE_INFINITY;try{let a=o[o.length-1];n=r[K(e,t,r,a)]}catch{let s=new f(this);for(let m of s){let p=r[m];n<p&&(n=p)}}return n}var vt=r=>i(r).mean();function Mt(){let{data:r,length:t}=this,o=new f(this),e=0;for(let n of o)e+=r[n];return e/t}var Et=r=>i(r).min();function qt(){let{data:r}=this,t=new f(this),o=Number.POSITIVE_INFINITY;for(let e of t){let n=r[e];o>n&&(o=n)}return o}var F=(r,t)=>new l(new Float64Array(r*t),{shape:[r,t]});var _t=(r,t)=>i(r).multiply(i(t));function jt(r){let{shape:[t,o],data:e,dtype:n}=this.copy(),{shape:[a,s],data:m}=r.copy();if(o!==a)throw new Error("sizes do not match");let p=F(t,s),{data:c}=p;try{Q(n,C,C,t,s,o,1,e,o,m,s,0,c,s)}catch{let u=new f(p),h,[d,I]=u.coords;for(let v of u){let M=0;for(h=0;h<o;h+=1)M+=e[d*o+h]*m[h*s+I];c[v]=M,[d,I]=u.coords}}return p}var{sqrt:xe}=Math,Ft=r=>i(r).norm();function zt(){let{data:r,length:t,strides:o,dtype:e}=this,n=0;try{let a=o[o.length-1];n=Z(e,t,r,a)}catch{n=xe(this.dot(this))}return n}var St=r=>i(r).normalize();function Ut(){return this.scale(1/this.norm())}var{pow:ge}=Math,$t=(r,t)=>i(r).pow(t);function Ct(r){let{data:t}=this,o=new f(this);for(let e of o)t[e]=ge(t[e],r);return this}var Ot=r=>i(r).prod();function Vt(){let{data:r}=this,t=new f(this),o=1;for(let e of t)o*=r[e];return o}var Rt=(r,t)=>i(r).product(i(t));function Xt(r){let{data:t}=this,{data:o}=r,e=new b(this,r);for(let[n,a]of e)t[n]*=o[a];return this}var Yt=(r,t)=>i(r).project(i(t));function Bt(r){return r.scale(this.dot(r)/r.dot(r))}var Gt=(r,t)=>i(r).push(t);function Pt(r){if(this.shape.length!==1)throw new Error("push operation not permitted for multidimensional arrays");let{data:t,length:o}=this,e=o+1,n=new(N(this.dtype))(e);return n.set(t),n[o]=r,this.data=n,this.length=e,this.shape=[e],this}var Wt=(r,t=1e-6)=>i(r).rank(t);function Ht(r=1e-6){let{data:t}=this.copy().gauss(),o=new f(this),e=0,[n,a]=o.coords;for(let s of o)e<=n&&a>=n&&Math.abs(t[s])>r&&(e+=1),[n,a]=o.coords;return e}var Jt=r=>i(r).reciprocal();function Kt(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=1/r[o];return this}var Qt=(r,t,o)=>i(r).reduce(t,o);function Zt(r,t){let{data:o,length:e}=this;if(e===0&&typeof t>"u")throw new Error("Reduce of empty array with no initial value.");let n=new f(this),a=r.bind(this),s;typeof t>"u"?(s=o[0],n.next()):s=t;for(let m of n)s=a(s,o[m],m,o);return s}var ro=(r,...t)=>i(r).reshape(...t);function to(...r){let{length:t}=this;if(r.reduce((o,e)=>o*e,1)!==t)throw new Error(`shape ${r} does not match length ${t}`);return this.shape=r,this.strides=w(r),this}var{round:we}=Math,oo=r=>i(r).round();function eo(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=we(r[o]);return this}var ao=(r,t,o,e=1)=>i(r).row_add(t,o,e);function no(r,t,o=1){this.check(r,0),this.check(t,0);let[,e]=this.shape,{data:n}=this,a;for(a=0;a<e;a+=1)n[r*e+a]+=n[t*e+a]*o;return this}var io=(r,t)=>i(r).scale(t);function so(r){let{data:t,length:o,strides:e,dtype:n}=this;try{let a=e[e.length-1];rr(n,o,r,t,a)}catch{let s=new f(this);for(let m of s)t[m]*=r}return this}var mo=(r,...t)=>{r.set(...t)};function po(...r){let t=r.slice(0,-1),o=r[r.length-1];this.check(...t);let{shape:e}=this,n=0,a;for(a=0;a<t.length;a+=1)n*=e[a],n+=t[a];this.data[n]=o}var{sign:ke}=Math,fo=r=>i(r).sign();function co(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=ke(r[o]);return this}var{sin:Le}=Math,uo=r=>i(r).sin();function yo(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=Le(r[o]);return this}var{sinh:Ie}=Math,ho=r=>i(r).sinh();function lo(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=Ie(r[o]);return this}var Ao=(r,t,o,e)=>i(r).slice(t,o,e);function bo(r=0,t=this.shape[0],o=1){let{data:e,shape:n}=this,a=n.length;if(r<0||t<0)return this.slice(r<0?n[n.length-1]+r:r,t<0?n[n.length-1]+t:t);if(r>t)return this.slice(t,r,o);if(o<=0)throw new Error("step argument has to be a positive integer");let s=[Math.ceil((t-r)/Math.abs(o)),...n.slice(1)],m=E(s),p=w(s),c=a>1?e.subarray(r*s[s.length-1],t*s[s.length-1]):e.subarray(r,t);return p[0]*=o,new l(c,{shape:s,length:m,strides:p})}var Do=(r,t)=>i(r).solve(i(t));function No(r){let{data:t,dtype:o}=this,{data:e,shape:[n,a]}=r;try{let s=new Int32Array(n);pt(o,n,a,t,n,s,e,a)}catch{let[m,p]=this.lu_factor(),{data:c}=m,{data:y}=r,u,h,d;for(u=0;u<p.length;u+=1)u!==p[u]-1&&r.swap(u,p[u]-1);for(d=0;d<a;d+=1){for(u=0;u<n;u+=1)for(h=0;h<u;h+=1)y[u*a+d]-=c[u*n+h]*y[h*a+d];for(u=n-1;u>=0;u-=1){for(h=u+1;h<n;h+=1)y[u*a+d]-=c[u*n+h]*y[h*a+d];y[u*a+d]/=c[u*n+u]}}}return r}var{sqrt:Te}=Math,xo=r=>i(r).sqrt();function go(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=Te(r[o]);return this}var wo=r=>{i(r).square()};function ko(){let{length:r}=this.shape,[t,o]=this.shape;if(r!==2||t!==o)throw new Error("matrix is not square")}var Lo=(r,t)=>i(r).subtract(i(t));function Io(r){return this.add(r,-1)}var To=r=>i(r).sum();function vo(){let{data:r}=this,t=new f(this),o=0;for(let e of t)o+=r[e];return o}var Mo=(r,t,o)=>i(r).swap(t,o);function Eo(r,t){this.check(r,0),this.check(t,0);let{data:o}=this,[,e]=this.shape,n=o.slice(r*e,(r+1)*e);return o.copyWithin(r*e,t*e,(t+1)*e),o.set(n,t*e),this}var{tan:ve}=Math,qo=r=>i(r).tan();function _o(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=ve(r[o]);return this}var{tanh:Me}=Math,jo=r=>i(r).tanh();function Fo(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=Me(r[o]);return this}var zo=r=>i(r).toArray();function So(r=0,t=0){let{data:o,shape:e,strides:n}=this,{length:a}=e;if(t>=a)return o[r];let s=e[t],m=n[t],p=[];for(let c=0;c<s;c++){let y=this.toArray(r,t+1);if(y===null)return null;p[c]=y,r+=m}return p}var Uo=require("util");var $o=r=>i(r).toString();function V(){return`array(${(0,Uo.inspect)(this.toArray(),{depth:10,breakLength:40})}, dtype=${this.dtype})`}var Co=r=>i(r).trace();function Oo(){let[r,t]=this.shape,{data:o}=this,e=Math.min(r,t),n=0,a;for(a=0;a<e;a+=1)n+=o[a*t+a];return n}var Vo=r=>i(r).transpose();function Ro(){if(this.shape.length<2)return this;let r=this.shape[0];return this.shape[0]=this.shape[1],this.shape[1]=r,r=this.strides[0],this.strides[0]=this.strides[1],this.strides[1]=r,this}var{trunc:Ee}=Math,Xo=r=>i(r).trunc();function Yo(){let{data:r}=this,t=new f(this);for(let o of t)r[o]=Ee(r[o]);return this}var Bo=r=>{if(r<0)throw new Error("invalid n");let t=new Float64Array(r*r),o=new l(t,{shape:[r,r]}),e=new f(o),[n,a]=e.coords;for(let s of e){let m=r-n-1,p=r-a-1;t[s]=(a+m*2+1)%r*r+(p+m*2+1)%r+1,[n,a]=e.coords}return o};var Go=(...r)=>new l(new Float64Array(r.reduce((t,o)=>t*o,1)),{shape:r}).fill(1);var Po=(...r)=>new l(new Float64Array(r.reduce((t,o)=>t*o,1)),{shape:r}).map(()=>Math.random());var Wo=(...r)=>{let t=Float64Array,o=!1,e,n,a;switch(r.length){case 2:a=r.pop(),n=1,e=r.pop();break;case 3:a=r.pop(),n=r.pop(),e=r.pop();break;default:throw new Error("invalid range")}if(a-e<0){let c=a;a=e,e=c,o=!0}if(n>a-e)throw new Error("invalid range");let s=new t(Math.ceil((a-e)/n)),m=e,p=0;if(o)for(;m<a;m+=n,p+=1)s[p]=a-m+e;else for(;m<a;m+=n,p+=1)s[p]=m;return new l(s)};var qe=Symbol.for("nodejs.util.inspect.custom"),l=class{data=new Float64Array(0);dtype="float64";length=0;shape=[0];strides=[0];[qe]=V;abs=Y;acos=G;acosh=W;add=or;angle=ar;asin=ir;asinh=mr;atan=fr;atanh=ur;augment=yr;binOp=lr;cbrt=Ar;ceil=Dr;check=xr;combine=wr;copy=Lr;cos=Tr;cosh=Mr;cross=qr;det=jr;diagonal=zr;dot=Ur;eig=Cr;equals=Vr;equidimensional=Xr;equilateral=Br;exp=Pr;expm1=Hr;fill=Kr;floor=Zr;forEach=tt;fround=et;gauss=nt;get=st;inv=ct;log=yt;log10=lt;log1p=At;log2=Dt;lu=xt;lu_factor=wt;map=Lt;max=Tt;mean=Mt;min=qt;multiply=jt;norm=zt;normalize=Ut;pow=Ct;prod=Vt;product=Xt;project=Bt;push=Pt;rank=Ht;reciprocal=Kt;reduce=Zt;reshape=to;round=eo;row_add=no;scale=so;set=po;sign=co;sin=yo;sinh=lo;slice=bo;solve=No;sqrt=go;square=ko;subtract=Io;sum=vo;swap=Eo;tan=_o;tanh=Fo;toArray=So;toString=V;trace=Oo;transpose=Ro;trunc=Yo;constructor(t,o){if(!t)return;if(t instanceof l)return t;if(t instanceof f){if(!o||!o.dtype)throw new Error("dtype is missing");t.shape&&(o.shape=t.shape);let m=t.length;t=new(N(o.dtype))(m)}let{shape:e=$(t),length:n=E(e),strides:a=w(e),dtype:s=R(t)}=o||{};this.data=U(t)?t:new(N(s))(S(t)),this.shape=e,this.length=n,this.dtype=s,this.strides=a}get x(){return this.get(0)}set x(t){this.set(0,t)}get y(){return this.get(1)}set y(t){this.set(1,t)}get z(){return this.get(2)}set z(t){this.set(2,t)}get w(){return this.get(3)}set w(t){this.set(3,t)}get T(){return this.copy().transpose()}};try{window.v=l}catch{}0&&(module.exports={NDArray,NDIter,NDMultiIter,abs,acos,acosh,add,angle,array,asin,asinh,atan,atanh,augment,binOp,cbrt,ceil,check,combine,copy,cos,cosh,cross,det,diagonal,dot,eig,equals,equidimensional,equilateral,exp,expm1,eye,fill,floor,forEach,fround,gauss,get,inv,log,log10,log1p,log2,lu,lu_factor,magic,map,matrix,max,mean,min,multiply,norm,normalize,ones,pow,prod,product,project,push,random,range,rank,reciprocal,reduce,reshape,round,row_add,scale,set,sign,sin,sinh,slice,solve,sqrt,square,subtract,sum,swap,tan,tanh,toArray,toString,trace,transpose,trunc,zeros});
//# sourceMappingURL=index.js.map
