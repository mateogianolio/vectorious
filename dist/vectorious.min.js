!function i(a,s,h){function u(r,t){if(!s[r]){if(!a[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[r]={exports:{}};a[r][0].call(o.exports,function(t){return u(a[r][1][t]||t)},o,o.exports,i,a,s,h)}return s[r].exports}for(var c="function"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,r,e){},{}],2:[function(t,r,e){"use strict";var n,o=this&&this.__extends||(n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},function(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0});var y,i=t("./NDArray"),f=t("./Vector");try{y=t("nblas")}catch(t){}var a=function(t,r,e){return(r+2*e+1)%t},s=function(e){function d(t,r){return"number"==typeof t&&"number"==typeof r?e.call(this,new Float64Array(t*r),{shape:[t,r]})||this:e.call(this,t,r)||this}return o(d,e),d.add=function(t,r){return t.copy().add(r)},d.augment=function(t,r){return t.copy().augment(r)},d.binOp=function(t,r,e){return t.copy().binOp(r,e)},d.equals=function(t,r){return t.equals(r)},d.fill=function(t,r,e,n){if(void 0===e&&(e=0),void 0===n&&(n=Float64Array),t<=0||r<=0)throw new Error("invalid size");return new d(new n(t*r),{shape:[t,r]}).fill(e)},d.identity=function(r,t){return void 0===t&&(t=Float64Array),d.fill(r,r,function(t){return t%r===Math.floor(t/r)?1:0},t)},d.magic=function(t,r){if(void 0===r&&(r=Float64Array),t<0)throw new Error("invalid size");var e,n,o=new r(t*t);for(e=0;e<t;e+=1)for(n=0;n<t;n+=1)o[(t-e-1)*t+(t-n-1)]=a(t,t-n-1,e)*t+a(t,n,e)+1;return new d(o,{shape:[t,t]})},d.multiply=function(t,r){return t.multiply(r)},d.ones=function(t,r,e){return void 0===e&&(e=Float64Array),d.fill(t,r,1,e)},d.plu=function(t){return t.copy().plu()},d.product=function(t,r){return t.copy().product(r)},d.random=function(t,r,e,n,o){return void 0===e&&(e=0),void 0===n&&(n=1),void 0===o&&(o=Float64Array),d.fill(t,r,e,o).map(function(t){return t+Math.random()*(n-e)})},d.rank=function(t){return t.copy().rank()},d.scale=function(t,r){return t.copy().scale(r)},d.subtract=function(t,r){return t.copy().subtract(r)},d.zeros=function(t,r,e){return void 0===e&&(e=Float64Array),d.fill(t,r,0,e)},d.prototype.augment=function(t){var r=this.shape,e=r[0],n=r[1],o=t.shape,i=o[0],a=o[1];if(0===i||0===a)return this;if(e!==i)throw new Error("rows do not match");var s,h,u=this.data,c=t.data,f=n+a,p=new this.type(f*e);for(s=0;s<e;s+=1)for(h=0;h<n;h+=1)p[s*f+h]=u[s*n+h];for(s=0;s<i;s+=1)for(h=0;h<a;h+=1)p[s*f+h+n]=c[s*a+h];return this.shape=[e,f],this.length=p.length,this.data=p,this},d.prototype.binOp=function(t,r){var e=this.shape,n=e[0],o=e[1],i=t.shape,a=i[0],s=i[1];if(n!==a||o!==s)throw new Error("sizes do not match!");var h,u=this.data,c=this.length,f=t.data;for(h=0;h<c;h+=1)u[h]=r(u[h],f[h],h);return this},d.prototype.check=function(t,r){var e=this.shape,n=e[0],o=e[1];if(isNaN(t)||isNaN(r))throw new Error("one of the indices is not a number");if(t<0||r<0||n-1<t||o-1<r)throw new Error("index out of bounds")},d.prototype.determinant=function(){var t=this.shape,r=t[0],e=t[1];if(r!==e)throw new Error("matrix is not square");var n,o=d.plu(this),i=o[0],a=o[1],s=1,h=1;for(n=0;n<r;n+=1)n!==a[n]&&(h*=-1);for(n=0;n<r;n+=1)s*=i.data[n*e+n];return h*s},d.prototype.diag=function(){var t,r=this.data,e=this.shape,n=e[0],o=e[1],i=new this.type(Math.min(n,o));for(t=0;t<n&&t<o;t+=1)i[t]=r[t*o+t];return new f.Vector(i)},d.prototype.each=function(t){var r,e=this.shape[1],n=this.data,o=this.length;for(r=0;r<o;r+=1)t.call(this,n[r],0===e?0:Math.floor(r/e),r%e);return this},d.prototype.gauss=function(){var t,r,e,n,o,i=this.shape,a=i[0],s=i[1],h=this.copy(),u=0;for(e=0;e<a;e+=1){if(s<=u)throw new Error("matrix is singular");for(n=e;0===h.data[n*s+u];)if(a===(n+=1)&&(n=e,s===(u+=1)))throw new Error("matrix is singular");if(h.swap(e,n),0!==(t=h.data[e*s+u]))for(o=0;o<s;o+=1)h.data[e*s+o]=h.data[e*s+o]/t;for(n=0;n<a;n+=1)if(r=h.data[n*s+u],n!==e)for(o=0;o<s;o+=1)h.data[n*s+o]=h.data[n*s+o]-h.data[e*s+o]*r;u+=1}for(e=0;e<a;e+=1){for(n=t=0;n<s;n+=1)0===t&&(t=h.data[e*s+n]);if(0===t)for(o=0;o<s;o+=1)h.data[e*s+o]=h.data[e*s+o]/t}return h},d.prototype.get=function(t,r){return this.check(t,r),this.data[t*this.shape[1]+r]},d.prototype.inverse=function(){var t=this.shape,r=t[0],e=t[1];if(r!==e)throw new Error("invalid dimensions");var n,o,i=d.identity(r),a=d.augment(this,i).gauss(),s=d.zeros(r,e),h=d.zeros(r,e),u=a.shape[1];for(n=0;n<r;n+=1)for(o=0;o<u;o+=1)o<e?s.set(n,o,a.get(n,o)):h.set(n,o-r,a.get(n,o));if(!s.equals(d.identity(r)))throw new Error("matrix is not invertible");return h},d.prototype.lu=function(){var t,r,e=this.shape,n=e[0],o=e[1],i=d.plu(this),a=i[0],s=i[1],h=a.copy(),u=a.copy();for(t=0;t<n;t+=1)for(r=t;r<o;r+=1)h.data[t*o+r]=t===r?1:0;for(t=0;t<n;t+=1)for(r=0;r<t&&r<o;r+=1)u.data[t*o+r]=0;return[h,u,s]},d.prototype.lusolve=function(t,r){var e,n,o,i=this.data,a=t.shape,s=a[0],h=a[1],u=t.data;for(e=0;e<r.length;e+=1)e!==r[e]&&t.swap(e,r[e]);for(o=0;o<h;o+=1){for(e=0;e<s;e+=1)for(n=0;n<e;n+=1)u[e*h+o]-=i[e*s+n]*u[n*h+o];for(e=s-1;0<=e;e-=1){for(n=e+1;n<s;n+=1)u[e*h+o]-=i[e*s+n]*u[n*h+o];u[e*h+o]/=i[e*s+e]}}return t},d.prototype.map=function(t){var r,e=this.shape[1],n=this.length,o=this.copy(),i=o.data;for(r=0;r<n;r+=1)i[r]=t.call(o,i[r],0===e?0:Math.floor(r/e),r%e,i);return o},d.prototype.multiply=function(t){var r=this.shape,e=r[0],n=r[1],o=t.shape,i=o[0],a=o[1];if(n!==i)throw new Error("sizes do not match");var s=this.data,h=t.data,u=new this.type(e*a);try{y.gemm(s,h,u,e,a,n)}catch(t){var c=void 0,f=void 0,p=void 0,l=void 0;for(c=0;c<e;c+=1)for(f=0;f<a;f+=1){for(p=l=0;p<n;p+=1)l+=s[c*n+p]*h[f+p*a];u[c*a+f]=l}}return new d(u,{shape:[e,a]})},Object.defineProperty(d.prototype,"T",{get:function(){return this.transpose()},enumerable:!0,configurable:!0}),d.prototype.plu=function(){var t,r,e,n,o,i,a,s=this.data,h=this.shape[0],u=new Int32Array(h);for(a=0;a<h;a+=1){for(n=a,t=Math.abs(s[a*h+a]),i=a+1;i<h;i+=1)t<(r=Math.abs(s[i*h+a]))&&(t=r,n=i);for((u[a]=n)!==a&&this.swap(a,n),e=s[a*h+a],o=a+1;o<h;o+=1)s[o*h+a]/=e;for(o=a+1;o<h;o+=1){for(i=a+1;i<h-1;i+=1)s[o*h+i]-=s[o*h+a]*s[a*h+i],s[o*h+(i+=1)]-=s[o*h+a]*s[a*h+i];i===h-1&&(s[o*h+i]-=s[o*h+a]*s[a*h+i])}}return[this,u]},d.prototype.rank=function(){var t,r,e,n,o,i,a=this.toArray().map(function(t){return new f.Vector(t)}),s=this.shape,h=s[0],u=s[1],c=0;for(o=0;o<h-1;o+=1){for(r=void 0,i=o;i<h;i+=1)if(0!==a[o].get(o)){o!==i&&(t=a[o],a[o]=a[i],a[i]=t),r=a[o];break}if(void 0!==r)for(i=o+1;i<h;i+=1)n=(e=a[i]).get(o)/r.get(o),a[i]=e.subtract(r.scale(n))}for(o=0;o<h;o+=1)for(i=0;i<u;i+=1)if(0!==a[o].get(i)){c+=1;break}return c},d.prototype.reduce=function(t,r){var e=this.shape[1],n=this.length;if(0===n&&void 0===r)throw new Error("reduce of empty matrix with no initial value.");var o,i,a=this.data;for(o=void 0===r?(i=a[0],1):(i=r,0);o<n;o+=1)i=t.call(this,i,a[o],0===e?0:Math.floor(o/e),o%e);return i},d.prototype.rowAdd=function(t,r,e){void 0===e&&(e=1),this.check(t,0),this.check(r,0);var n,o=this.shape[1];for(n=0;n<o;n+=1)this.set(t,n,this.get(t,n)+this.get(r,n)*e);return this},d.prototype.set=function(t,r,e){return this.check(t,r),this.data[t*this.shape[1]+r]=e,this},d.prototype.solve=function(t){var r=d.plu(this),e=r[0],n=r[1];return e.lusolve(t.copy(),n)},d.prototype.swap=function(t,r){var e=this.shape,n=e[0],o=e[1];if(t<0||r<0||n-1<t||n-1<r)throw new Error("index out of bounds");var i=this.data.slice(t*o,(t+1)*o);return this.data.copyWithin(t*o,r*o,(r+1)*o),this.data.set(i,r*o),this},d.prototype.toArray=function(){var t,r=this.shape,e=r[0],n=r[1],o=[];for(t=0;t<e;t+=1)o.push(Array.prototype.slice.call(this.data.subarray(t*n,(t+1)*n)));return o},d.prototype.toString=function(){var t,r=this.shape,e=r[0],n=r[1],o=[];for(t=0;t<e;t+=1)o.push("["+this.data.subarray(t*n,(t+1)*n)+"]");return"["+o.join(", \n")+"]"},d.prototype.trace=function(){var t,r=this.diag(),e=r.length,n=0;for(t=0;t<e;t+=1)n+=r.get(t);return n},d.prototype.transpose=function(){var t,r,e=this.shape,n=e[0],o=e[1],i=new this.type(o*n);for(t=0;t<n;t+=1)for(r=0;r<o;r+=1)i[r*n+t]=this.data[t*o+r];return new d(i,{shape:[o,n]})},d}(i.NDArray);e.Matrix=s;try{window.Matrix=s}catch(t){}},{"./NDArray":3,"./Vector":4,nblas:1}],3:[function(t,r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h,n=t("./util");try{h=t("nblas")}catch(t){}var o=function(){function e(t,r){if(this.data=new Float64Array(0),this.length=0,this.shape=[0],this.type=Float64Array,n.isTypedArray(t))this.data=t,this.shape="object"==typeof r?r.shape:[this.data.length],this.length=this.data.length,this.type=n.type(t);else if(t instanceof Array)this.data=new Float64Array(n.flatten(t)),this.shape=n.shape(t),this.length=this.data.length;else if(t instanceof e)return t.copy()}return e.prototype.add=function(r,e){void 0===e&&(e=1),this.equilateral(r),this.equidimensional(r);try{h.axpy(r.data,this.data,e)}catch(t){var n=this,o=n.data,i=n.length,a=r.data,s=void 0;for(s=0;s<i;s+=1)o[s]+=e*a[s]}return this},e.prototype.copy=function(){var t=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return t.data=new this.type(this.data),t.shape=this.shape,t.length=this.length,t.type=this.type,t},e.prototype.dot=function(t){this.equilateral(t),this.equidimensional(t);var r=this.data,e=this.length,n=t.data;try{return h.dot(r,n)}catch(t){var o=0,i=void 0;for(i=0;i<e;i+=1)o+=r[i]*n[i];return o}},e.prototype.equals=function(t){this.equilateral(t),this.equidimensional(t);var r,e=this.data,n=this.length,o=t.data;for(r=0;r<n;r+=1)if(e[r]!==o[r])return!1;return!0},e.prototype.equidimensional=function(t){var r=this.shape,e=t.shape;if(!r.every(function(t,r){return t===e[r]}))throw new Error("shapes "+r+" and "+e+" do not match")},e.prototype.equilateral=function(t){var r=this.length,e=t.length;if(r!==e)throw new Error("lengths "+r+" and "+e+" do not match")},e.prototype.fill=function(t){void 0===t&&(t=0);var r,e=this.data,n=this.length;for(r=0;r<n;r+=1)e[r]=t instanceof Function?t(r):t;return this},e.prototype.magnitude=function(){var r=this.length;if(0===r)return 0;var e=this.data;try{return h.nrm2(e)}catch(t){var n=0,o=void 0;for(o=0;o<r;o+=1)n+=e[o]*e[o];return Math.sqrt(n)}},e.prototype.max=function(){var r=this.data;try{return r[h.iamax(r)]}catch(t){var e=this.length,n=Number.NEGATIVE_INFINITY,o=void 0;for(o=0;o<e;o+=1)n=n<r[o]?r[o]:n;return n}},e.prototype.min=function(){var t,r=this.data,e=this.length,n=Number.POSITIVE_INFINITY;for(t=0;t<e;t+=1)n=n<r[t]?n:r[t];return n},e.prototype.product=function(t){this.equilateral(t),this.equidimensional(t);var r,e=this.data,n=this.length,o=t.data;for(r=0;r<n;r+=1)e[r]*=o[r];return this},e.prototype.reshape=function(t){var r=this.length;if(t.reduce(function(t,r){return t*r},1)!==r)throw new Error("shape "+n.shape+" does not match length "+r);return this.shape=t,this},e.prototype.scale=function(r){var e=this.data;try{h.scal(e,r)}catch(t){var n=this.length,o=void 0;for(o=0;o<n;o+=1)e[o]*=r}return this},e.prototype.subtract=function(t){return this.add(t,-1)},e}();e.NDArray=o;try{window.NDArray=o}catch(t){}},{"./util":5,nblas:1}],4:[function(t,r,e){"use strict";var n,o=this&&this.__extends||(n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},function(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(r){function f(t){return r.call(this,"number"==typeof t?new Float64Array(t):t)||this}return o(f,r),f.add=function(t,r){return t.copy().add(r)},f.angle=function(t,r){return t.angle(r)},f.binOp=function(t,r,e){return t.copy().binOp(r,e)},f.combine=function(t,r){return t.copy().combine(r)},f.dot=function(t,r){return t.dot(r)},f.equals=function(t,r){return t.equals(r)},f.fill=function(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=Float64Array),t<0)throw new Error("invalid size");return new f(new e(t)).fill(r)},f.normalize=function(t){return t.copy().normalize()},f.ones=function(t,r){return void 0===r&&(r=Float64Array),f.fill(t,1,r)},f.project=function(t,r){return t.project(r.copy())},f.random=function(t,r,e,n){return void 0===r&&(r=0),void 0===e&&(e=1),void 0===n&&(n=Float64Array),f.fill(t,r,n).map(function(t){return t+Math.random()*(e-r)})},f.range=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e,n,o,i=Float64Array,a=!1;switch("function"==typeof t[t.length-1]&&(i=t.pop()),t.length){case 2:o=t.pop(),n=1,e=t.pop();break;case 3:o=t.pop(),n=t.pop(),e=t.pop();break;default:throw new Error("invalid range")}if(o-e<0){var s=o;o=e,e=s,a=!0}if(o-e<n)throw new Error("invalid range");var h=new i(Math.ceil((o-e)/n)),u=e,c=0;if(a)for(;u<o;u+=n,c+=1)h[c]=o-u+e;else for(;u<o;u+=n,c+=1)h[c]=u;return new f(h)},f.scale=function(t,r){return t.copy().scale(r)},f.subtract=function(t,r){return t.copy().subtract(r)},f.zeros=function(t,r){return void 0===r&&(r=Float64Array),f.fill(t,0,r)},f.prototype.angle=function(t){return Math.acos(this.dot(t)/this.magnitude()/t.magnitude())},f.prototype.binOp=function(t,r){var e,n=this.length;if(n!==t.length)throw new Error("sizes do not match!");for(e=0;e<n;e+=1)this.data[e]=r(this.data[e],t.data[e],e);return this},f.prototype.check=function(t){if(!isFinite(t)||t<0||t>this.length-1)throw new Error("index out of bounds")},f.prototype.combine=function(t){var r=this.length,e=t.length;if(0===e)return this;if(0===r)return this.data=new t.type(t.data),this.length=e,this.type=t.type,this;var n=this.data,o=t.data,i=new this.type(r+e);return i.set(n),i.set(o,r),this.data=i,this.length=r+e,this.shape=[r+e],this},f.prototype.cross=function(t){if(3!==this.length||3!==t.length)throw new Error("cross(...) : vectors must have three components.");return new f([this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x])},f.prototype.each=function(t){var r;for(r=0;r<this.length;r+=1)t.call(this,this.data[r],r,this.data);return this},f.prototype.get=function(t){return this.check(t),this.data[t]},f.prototype.map=function(t){var r,e=this.length,n=this.copy(),o=n.data;for(r=0;r<e;r+=1)o[r]=t.call(n,o[r],r,o);return n},f.prototype.normalize=function(){return this.scale(1/this.magnitude())},f.prototype.project=function(t){return t.scale(this.dot(t)/t.dot(t))},f.prototype.push=function(t){return this.combine(new f([t]))},f.prototype.reduce=function(t,r){var e,n,o=this.length;if(0===o&&void 0===r)throw new Error("Reduce of empty matrix with no initial value.");for(e=void 0===r?(n=this.data[0],1):(n=r,0);e<o;e+=1)n=t.call(this,n,this.data[e],e,this.data);return n},f.prototype.set=function(t,r){return this.check(t),this.data[t]=r,this},Object.defineProperty(f.prototype,"x",{get:function(){return this.get(0)},set:function(t){this.set(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"y",{get:function(){return this.get(1)},set:function(t){this.set(1,t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"z",{get:function(){return this.get(2)},set:function(t){this.set(2,t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"w",{get:function(){return this.get(3)},set:function(t){this.set(3,t)},enumerable:!0,configurable:!0}),f.prototype.toArray=function(){return[].slice.call(this.data)},f.prototype.toString=function(){var t=this.length,r=["["],e=0;for(e<t&&(r.push(String(this.data[e])),e+=1);e<t;)r.push(", "+this.data[e]),e+=1;return r.push("]"),r.join("")},f}(t("./NDArray").NDArray);e.Vector=i;try{window.Vector=i}catch(t){}},{"./NDArray":3}],5:[function(t,r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.flatten=function(t){return t.reduce(function(t,r){return t.concat(Array.isArray(r)?e.flatten(r):r)},[])},e.shape=function(t){return Array.isArray(t)?[t.length].concat(e.shape(t[0])):[]},e.type=function(t){switch(t.constructor.name){case"Int8Array":return Int8Array;case"Uint8Array":return Uint8Array;case"Int16Array":return Int16Array;case"Uint16Array":return Uint16Array;case"Int32Array":return Int32Array;case"Uint32Array":return Uint32Array;case"Uint8ClampedArray":return Uint8ClampedArray;case"Float32Array":return Float32Array;default:return Float64Array}},e.isTypedArray=function(t){return!!(t&&t.buffer instanceof ArrayBuffer&&t.BYTES_PER_ELEMENT)}},{}]},{},[4,2]);